<div class="spinner-overlay" *ngIf="loading">
    <div class="spinner">
        <mat-spinner></mat-spinner>
    </div>
</div>

<div class="wrapper fadeInDown">
    <div id="formContent">

        <div class="fadeIn first">
            <img src="assets/img/Logo.png" id="icon" alt="Star Routing logo" />
        </div>

        <form [formGroup]="newPwd" (ngSubmit)="onNewPwd()">
            <div class="fadeIn second">
                <p>
                    <mat-form-field appearance="outline">
                        <mat-label>Nueva contrase単a</mat-label>
                        <input id="password" formControlName="contrasenaUsuario" matInput [ngClass]="{
                    'is-invalid': newPwd.get('contrasenaUsuario')?.invalid && (newPwd.get('contrasenaUsuario')?.touched || newPwd.get('contrasenaUsuario')?.dirty),
                    'is-valid': newPwd.get('contrasenaUsuario')?.valid && (newPwd.get('contrasenaUsuario')?.touched || newPwd.get('contrasenaUsuario')?.dirty)
                  }" [type]="showPassword ? 'text' : 'password'">
                        <mat-icon matSuffix (click)="togglePasswordVisibility()" [color]="'primary'">
                            {{ showPassword ? 'visibility_off' : 'visibility' }}
                        </mat-icon>
                    </mat-form-field><br>
                </p>
            </div>
            <div class="fadeIn third">
                <p>
                    <mat-form-field appearance="outline">
                        <mat-label>Repite la contrase単a</mat-label>
                        <input id="password" formControlName="repetirContrasena" matInput [ngClass]="{
                    'is-invalid': newPwd.get('repetirContrasena')?.invalid && (newPwd.get('repetirContrasena')?.touched || newPwd.get('repetirContrasena')?.dirty),
                    'is-valid': newPwd.get('repetirContrasena')?.valid && (newPwd.get('repetirContrasena')?.touched || newPwd.get('repetirContrasena')?.dirty)
                  }" [type]="showPassword ? 'text' : 'password'">
                        <mat-icon matSuffix (click)="togglePasswordVisibility()" [color]="'primary'">
                            {{ showPassword ? 'visibility_off' : 'visibility' }}
                        </mat-icon>
                        <mat-error *ngIf="newPwd.get('repetirContrasena')?.errors?.['passwordMismatch']">
                            Las contrase単as no coinciden.
                        </mat-error>
                    </mat-form-field><br>
                </p>
            </div>
            <button type="submit" color="primary" class="fadeIn fourth" mat-raised-button
                [disabled]="newPwd.get('contrasenaUsuario')?.invalid || newPwd.get('repetirContrasena')?.invalid">Cambiar
                contrase単a</button><br><br>
        </form>
    </div>
</div>